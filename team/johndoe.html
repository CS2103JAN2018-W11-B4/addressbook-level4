<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>John Doe - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>John Doe - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-addressbook-level-4"><a class="link" href="#project-addressbook-level-4">PROJECT: AddressBook - Level 4</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>AddressBook - Level 4 is a desktop address book application used for teaching Software Engineering principles. The user interacts with it using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 10 kLoC.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added <strong>the ability to undo/redo previous commands</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to undo all previous commands one at a time. Preceding undo commands can be reversed by using the redo command.</p>
</li>
<li>
<p>Justification: This feature improves the product significantly because a user can make mistakes in commands and the app should provide a convenient way to rectify them.</p>
</li>
<li>
<p>Highlights: This enhancement affects existing commands and commands to be added in future. It required an in-depth analysis of design alternatives. The implementation too was challenging as it required changes to existing commands.</p>
</li>
<li>
<p>Credits: <em>{mention here if you reused any code/ideas from elsewhere or if a third-party library is heavily used in the feature so that a reader can make a more accurate judgement of how much effort went into the feature}</em></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: added a history command that allows the user to navigate to previous commands using up/down keys.</p>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com">Functional code</a>] [<a href="https://github.com">Test code</a>] <em>{give links to collated code files}</em></p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed releases <code>v1.3</code> - <code>v1.5rc</code> (3 releases) on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Updated the GUI color scheme (Pull requests <a href="https://github.com">#33</a>, <a href="https://github.com">#34</a>)</p>
</li>
<li>
<p>Wrote additional tests for existing features to increase coverage from 88% to 92% (Pull requests <a href="https://github.com">#36</a>, <a href="https://github.com">#38</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Did cosmetic tweaks to existing contents of the User Guide: <a href="https://github.com">#14</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed (with non-trivial review comments): <a href="https://github.com">#12</a>, <a href="https://github.com">#32</a>, <a href="https://github.com">#19</a>, <a href="https://github.com">#42</a></p>
</li>
<li>
<p>Contributed to forum discussions (examples:  <a href="https://github.com">1</a>, <a href="https://github.com">2</a>, <a href="https://github.com">3</a>, <a href="https://github.com">4</a>)</p>
</li>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples:  <a href="https://github.com">1</a>, <a href="https://github.com">2</a>, <a href="https://github.com">3</a>)</p>
</li>
<li>
<p>Some parts of the history feature I added was adopted by several other class mates (<a href="https://github.com">1</a>, <a href="https://github.com">2</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Integrated a third party library (Natty) to the project (<a href="https://github.com">#42</a>)</p>
</li>
<li>
<p>Integrated a new Github plugin (CircleCI) to the team repo</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>{you can add/remove categories in the list above}</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="undoing-previous-command-code-undo-code"><a class="link" href="#undoing-previous-command-code-undo-code">Undoing previous command : <code>undo</code></a></h4>
<div class="paragraph">
<p>To revert a command you executed previously (in case you accidentally changed something), you can enter the command <code>undo</code>.
This will restore the ST instance to the state before the previous <em>undoable</em> command was executed.<br>
Format: <code>undo</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Undoable commands: those commands that modify the ST&#8217;s content (<code>add</code>, <code>alias</code>, <code>unalias</code>, <code>delete</code>, <code>edit</code> and <code>clear</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>delete 1</code><br>
<code>list</code><br>
<code>undo</code> (reverses the <code>delete 1</code> command)<br></p>
</li>
<li>
<p><code>select 1</code><br>
<code>list</code><br>
<code>undo</code><br>
The <code>undo</code> command fails as there are no undoable commands executed previously.</p>
</li>
<li>
<p><code>delete 1</code><br>
<code>clear</code><br>
<code>undo</code> (reverses the <code>clear</code> command)<br>
<code>undo</code> (reverses the <code>delete 1</code> command)<br></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="redoing-the-previously-undone-command-code-redo-code"><a class="link" href="#redoing-the-previously-undone-command-code-redo-code">Redoing the previously undone command : <code>redo</code></a></h4>
<div class="paragraph">
<p>To reverse the most recent <code>undo</code> command, you can enter the command <code>redo</code>.<br>
Format: <code>redo</code></p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>delete 1</code><br>
<code>undo</code> (reverses the <code>delete 1</code> command)<br>
<code>redo</code> (reapplies the <code>delete 1</code> command)<br></p>
</li>
<li>
<p><code>delete 1</code><br>
<code>redo</code><br>
The <code>redo</code> command fails as there are no <code>undo</code> commands executed previously.</p>
</li>
<li>
<p><code>delete 1</code><br>
<code>clear</code><br>
<code>undo</code> (reverses the <code>clear</code> command)<br>
<code>undo</code> (reverses the <code>delete 1</code> command)<br>
<code>redo</code> (reapplies the <code>delete 1</code> command)<br>
<code>redo</code> (reapplies the <code>clear</code> command)<br></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="encrypting-data-files-code-encrypt-code-em-since-v1-2-em"><a class="link" href="#encrypting-data-files-code-encrypt-code-em-since-v1-2-em">Encrypting data files : <code>encrypt</code> <em>(since v1.2)</em></a></h4>
<div class="paragraph">
<p>To encrypt ST and protect your data, you can enter the command <code>encrypt</code> followed by your password.<br>
Format: <code>encrypt PASSWORD</code></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Passwords are case-sensitive.</p>
</li>
<li>
<p>The password string can only contain characters in the UTF-8 format.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>encrypt test</code><br>
Encrypts <code>addressbook.xml</code> with "test" as the password.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Subsequently, when you are re-opening the app, you will be prompted to enter your password, as shown in the picture below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/passwordBox.png" alt="passwordBox" width="790">
</div>
</div>
</div>
<div class="sect3">
<h4 id="removal-of-password-code-decrypt-code-since-v1-3"><a class="link" href="#removal-of-password-code-decrypt-code-since-v1-3">Removal of password: <code>decrypt</code> (since v1.3)</a></h4>
<div class="paragraph">
<p>To remove the password protection of ST and decrypt <code>addressbook.xml</code>, you can enter the command <code>decrypt</code>.<br>
Format: <code>decrypt</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="undo-redo-feature"><a class="link" href="#undo-redo-feature">Undo/Redo feature</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>The undo/redo mechanism is facilitated by an <code>UndoRedoStack</code>, which resides inside <code>LogicManager</code>. It supports undoing and redoing of commands that modifies the state of the address book (e.g. <code>add</code>, <code>edit</code>). Such commands will inherit from <code>UndoableCommand</code>.</p>
</div>
<div class="paragraph">
<p><code>UndoRedoStack</code> only deals with <code>UndoableCommands</code>. Commands that cannot be undone will inherit from <code>Command</code> instead. The following diagram shows the inheritance diagram for commands:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/LogicCommandClassDiagram.png" alt="LogicCommandClassDiagram" width="800">
</div>
<div class="title">Figure 1. Logic Command Class Diagram</div>
</div>
<div class="paragraph">
<p>As you can see from the diagram, <code>UndoableCommand</code> adds an extra layer between the abstract <code>Command</code> class and concrete commands that can be undone, such as the <code>DeleteCommand</code>. Note that extra tasks need to be done when executing a command in an <em>undoable</em> way, such as saving the state of the address book before execution. <code>UndoableCommand</code> contains the high-level algorithm for those extra tasks while the child classes implements the details of how to execute the specific command. Note that this technique of putting the high-level algorithm in the parent class and lower-level steps of the algorithm in child classes is also known as the <a href="https://www.tutorialspoint.com/design_pattern/template_pattern.htm">template pattern</a>.</p>
</div>
<div class="paragraph">
<p>Commands that are not undoable are implemented this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ListCommand</span> <span class="directive">extends</span> Command {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        <span class="comment">// ... list logic ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the extra layer, the commands that are undoable are implemented this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">UndoableCommand</span> <span class="directive">extends</span> Command {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        <span class="comment">// ... undo logic ...</span>

        executeUndoableCommand();
    }
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">DeleteCommand</span> <span class="directive">extends</span> UndoableCommand {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult executeUndoableCommand() {
        <span class="comment">// ... delete logic ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Suppose that the user has just launched the application. The <code>UndoRedoStack</code> will be empty at the beginning.</p>
</div>
<div class="paragraph">
<p>The user executes a new <code>UndoableCommand</code>, <code>delete 5</code>, to delete the 5th person in the address book. The current state of the address book is saved before the <code>delete 5</code> command executes. The <code>delete 5</code> command will then be pushed onto the <code>undoStack</code> (the current state is saved together with the command).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoStartingStackDiagram.png" alt="UndoRedoStartingStackDiagram" width="800">
</div>
<div class="title">Figure 2. Undo and Redo Starting Stack</div>
</div>
<div class="paragraph">
<p>As the user continues to use the program, more commands are added into the <code>undoStack</code>. For example, the user may execute <code>add n/David &#8230;&#8203;</code> to add a new person.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand1StackDiagram.png" alt="UndoRedoNewCommand1StackDiagram" width="800">
</div>
<div class="title">Figure 3. Undo and Redo Stack after executing one Command</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a command fails its execution, it will not be pushed to the <code>UndoRedoStack</code> at all.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The user now decides that adding the person was a mistake, and decides to undo that action using <code>undo</code>.</p>
</div>
<div class="paragraph">
<p>We will pop the most recent command out of the <code>undoStack</code> and push it back to the <code>redoStack</code>. We will restore the address book to the state before the <code>add</code> command executed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoExecuteUndoStackDiagram.png" alt="UndoRedoExecuteUndoStackDiagram" width="800">
</div>
<div class="title">Figure 4. Undo and Redo stack before and after Undo command execution</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>undoStack</code> is empty, then there are no other commands left to be undone, and an <code>Exception</code> will be thrown when popping the <code>undoStack</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the undo operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoSequenceDiagram.png" alt="UndoRedoSequenceDiagram" width="800">
</div>
<div class="title">Figure 5. Undo Sequence Diagram</div>
</div>
<div class="paragraph">
<p>The redo does the exact opposite (pops from <code>redoStack</code>, push to <code>undoStack</code>, and restores the address book to the state after the command is executed).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>redoStack</code> is empty, then there are no other commands left to be redone, and an <code>Exception</code> will be thrown when popping the <code>redoStack</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The user now decides to execute a new command, <code>clear</code>. As before, <code>clear</code> will be pushed into the <code>undoStack</code>. This time the <code>redoStack</code> is no longer empty. It will be purged as it no longer make sense to redo the <code>add n/David</code> command (this is the behavior that most modern desktop applications follow).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand2StackDiagram.png" alt="UndoRedoNewCommand2StackDiagram" width="800">
</div>
<div class="title">Figure 6. Undo and Redo stack before and after Clear command execution</div>
</div>
<div class="paragraph">
<p>Commands that are not undoable are not added into the <code>undoStack</code>. For example, <code>list</code>, which inherits from <code>Command</code> rather than <code>UndoableCommand</code>, will not be added after execution:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoNewCommand3StackDiagram.png" alt="UndoRedoNewCommand3StackDiagram" width="800">
</div>
<div class="title">Figure 7. Undo and Redo stack before and after List command execution</div>
</div>
<div class="paragraph">
<p>The following activity diagram summarize what happens inside the <code>UndoRedoStack</code> when a user executes a new command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoActivityDiagram.png" alt="UndoRedoActivityDiagram" width="650">
</div>
<div class="title">Figure 8. Undo and Redo Activity Diagram</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-implementation-of-code-undoablecommand-code"><a class="link" href="#aspect-implementation-of-code-undoablecommand-code">Aspect: Implementation of <code>UndoableCommand</code></a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Add a new abstract method <code>executeUndoableCommand()</code></p>
<div class="ulist">
<ul>
<li>
<p>Pros: We will not lose any undone/redone functionality as it is now part of the default behaviour. Classes that deal with <code>Command</code> do not have to know that <code>executeUndoableCommand()</code> exist.</p>
</li>
<li>
<p>Cons: Hard for new developers to understand the template pattern.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Just override <code>execute()</code></p>
<div class="ulist">
<ul>
<li>
<p>Pros: Does not involve the template pattern, easier for new developers to understand.</p>
</li>
<li>
<p>Cons: Classes that inherit from <code>UndoableCommand</code> must remember to call <code>super.execute()</code>, or lose the ability to undo/redo.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-how-undo-redo-executes"><a class="link" href="#aspect-how-undo-redo-executes">Aspect: How undo &amp; redo executes</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Saves the entire address book.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement.</p>
</li>
<li>
<p>Cons: May have performance issues in terms of memory usage.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Individual command knows how to undo/redo by itself.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Will use less memory (e.g. for <code>delete</code>, just save the person being deleted).</p>
</li>
<li>
<p>Cons: We must ensure that the implementation of each individual command are correct.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-type-of-commands-that-can-be-undone-redone"><a class="link" href="#aspect-type-of-commands-that-can-be-undone-redone">Aspect: Type of commands that can be undone/redone</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Only include commands that modifies the address book (<code>add</code>, <code>clear</code>, <code>edit</code>).</p>
<div class="ulist">
<ul>
<li>
<p>Pros: We only revert changes that are hard to change back (the view can easily be re-modified as no data are * lost).</p>
</li>
<li>
<p>Cons: User might think that undo also applies when the list is modified (undoing filtering for example), * only to realize that it does not do that, after executing <code>undo</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Include all commands.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Might be more intuitive for the user.</p>
</li>
<li>
<p>Cons: User have no way of skipping such commands if he or she just want to reset the state of the address * book and not the view.
<strong>Additional Info:</strong> See our discussion  <a href="https://github.com/se-edu/addressbook-level4/issues/390#issuecomment-298936672">here</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-data-structure-to-support-the-undo-redo-commands"><a class="link" href="#aspect-data-structure-to-support-the-undo-redo-commands">Aspect: Data structure to support the undo/redo commands</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Use separate stack for undo and redo</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to understand for new Computer Science student undergraduates to understand, who are likely to be * the new incoming developers of our project.</p>
</li>
<li>
<p>Cons: Logic is duplicated twice. For example, when a new command is executed, we must remember to update * both <code>HistoryManager</code> and <code>UndoRedoStack</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Use <code>HistoryManager</code> for undo/redo</p>
<div class="ulist">
<ul>
<li>
<p>Pros: We do not need to maintain a separate stack, and just reuse what is already in the codebase.</p>
</li>
<li>
<p>Cons: Requires dealing with commands that have already been undone: We must remember to skip these commands. Violates Single Responsibility Principle and Separation of Concerns as <code>HistoryManager</code> now needs to do two * different things.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="data-encryption"><a class="link" href="#data-encryption">Data Encryption</a></h3>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">Current Implementation</a></h4>
<div class="paragraph">
<p>We are using <code>javax.crypto.cipher</code> and <code>java.security.key</code> package provided by java for the encryption of the data. The <code>SecurityUtil</code> class is used to provide the <code>SHA-1</code> hashing and <code>AES</code> encryption/decryption required.</p>
</div>
<div class="paragraph">
<p>Using a given password, it is first hashed using <code>SHA-1</code> to be used as the <code>AES</code> key.
The first 128 bits of the digest created by the <code>SHA-1</code> hash is extracted.
This is required as <code>AES</code> requires its key to be 128 bits long.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The encryption can be done simply by using <code>SecurityUtil.encrypt()</code> which will encrypt the addressbook.xml.</p>
</li>
<li>
<p>The decryption can be done simply by using <code>SecurityUtil.decrypt()</code> which will decrypt the addressbook.xml.</p>
</li>
<li>
<p>Currently, decryption/encryption is done in <code>XmlAddressBookStorage</code> class before/after <code>readAddressBook</code> and <code>saveAddressBook</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>No encryption is done if the user do not set a password.
Users can change their password using the command <code>encrypt</code> and decrypt it permanently using the command <code>decrypt</code>.</p>
</div>
<div class="paragraph">
<p>When an 'encrypt' command is issued, the argument is parsed and hashed. Is is then passed to the Model.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/PasswordSdForLogic.png" alt="PasswordSdForLogic" width="800">
</div>
</div>
<div class="paragraph">
<p>The <code>ModelManager</code> then updates the password in the <code>AddressBook</code> as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/PasswordSdForModel.png" alt="PasswordSdForModel" width="800">
</div>
<div class="title">Figure 9. Password Sequence Diagram for Model Component</div>
</div>
<div class="paragraph">
<p>The 128 bit password used to encrypt <code>addressbook.xml</code> is saved in the address book as <code>XmlAdaptedPassword</code> to ensure that the password is not lost after every reset of the application.
This is secure as even if a malicious user were to somehow get a copy of the 128 bit password, they would still need to use a computationally unfeasible second pre-image attack.
This is because users are unable to input hashed password directly.</p>
</div>
<div class="paragraph">
<p>When the user first starts the application, <code>ModelManager</code> would try to load the data from <code>addressbook.xml</code> without using any password.
If <code>addressbook.xml</code> is encrypted, this would cause the following code to trigger which would morph the <code>ui</code> to <code>PasswordUiManager</code> instead of <code>UiManager</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> checkPasswordChanged() {
    <span class="keyword">if</span> (passwordChanged) {
        ui = <span class="keyword">new</span> PasswordUiManager(storage, model, ui);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This change would cause the <code>PasswordWindow</code> to display instead of the <code>MainWindow</code>, requesting for a password input by the user.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/passwordBox.png" alt="passwordBox" width="800">
</div>
</div>
<div class="paragraph">
<p>If the password the user input is unable to decrypt <code>addressbook.xml</code>, a <code>WrongPasswordEvent</code> is raised which will cause the <code>PasswordUiManager</code> to display the following dialog to the user:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/wrongPasswordDialog.png" alt="wrongPasswordDialog" width="800">
</div>
</div>
<div class="paragraph">
<p>If the password the user input successfully decrypts <code>addressbook.xml</code>, a <code>CorrectPasswordEvent</code> is raised. This event is handled by the <code>PasswordUiManager</code> which will start the <code>UiManager</code>.
The application would behave as if it is not encrypted from here on.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-how-to-generate-the-aes-key"><a class="link" href="#aspect-how-to-generate-the-aes-key">Aspect: How to generate the AES key</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Generating the key from a password</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Users are able to key in their own passwords</p>
</li>
<li>
<p>Cons: Users have to input password for their data to be encrypted.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Generating the key within the code into a file for user to share.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: It would be guaranteed to be more secure than using our own generated key.
This is because keys generated by <code>java.crypto.KeyGenerator</code> have their algorithms reviewed by many experts in the area.</p>
</li>
<li>
<p>Cons: This would require a file to be carried by the user to decrypt their address book which makes it very inconvenient for the user.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-where-to-encrypt-and-decrypt-file"><a class="link" href="#aspect-where-to-encrypt-and-decrypt-file">Aspect: Where to encrypt and decrypt file</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Encryption and Decryption done in <code>XmlAddressBookStorage</code> class</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy and clear to understand implementation where file is encrypted and decrypted before and after <code>readAddressBook</code> and <code>saveAddressBook</code>.</p>
</li>
<li>
<p>Cons: <code>addressbook.xml</code> is in plain text longer than is required.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong>  Encryption and Decryption done where needed in <code>XmlUtil</code> and <code>XmlFileStorage</code></p>
<div class="ulist">
<ul>
<li>
<p>Pros: <code>addressbook.xml</code> is exposed minimally.</p>
</li>
<li>
<p>Cons: Increase coupling of more classes and makes the implementation harder to understand.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-where-to-save-the-password"><a class="link" href="#aspect-where-to-save-the-password">Aspect: Where to save the password</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Save in <code>addressbook.xml</code></p>
<div class="ulist">
<ul>
<li>
<p>Pros: The password is not lost after every reload of the application.</p>
</li>
<li>
<p>Cons: Plaintext of <code>addressbook.xml</code> contains the 128 bit <code>AES</code> key used.
However, this is still secure as even if a malicious user were to somehow get a copy of the 128 bit password,
they would still need to use a computationally unfeasible second pre-image attack.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Password not saved</p>
<div class="ulist">
<ul>
<li>
<p>Pros: No chance of password being compromised.</p>
</li>
<li>
<p>Cons: Password reset after each reload of application.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-default-password"><a class="link" href="#aspect-default-password">Aspect: Default Password</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> <code>addressbook.xml</code> not encrypted by default</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Users are able to choose whether they want their data to be encrypted or not as encryption and decryption
requires computation which may make the application slower than desired.</p>
</li>
<li>
<p>Cons: Unfamiliar users may not be aware of the option of encrypting their data making it less secure.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Default Password provided to encrypt <code>addressbook.xml</code></p>
<div class="ulist">
<ul>
<li>
<p>Pros: Data is always encrypted.</p>
</li>
<li>
<p>Cons: A default password is, most of the time, as effective as no password and it also slows down the application more than necessary.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-powerpointlabs"><a class="link" href="#project-powerpointlabs">PROJECT: PowerPointLabs</a></h2>
<div class="sectionbody">
<hr>
<div class="paragraph">
<p><em>{Optionally, you may include other projects in your portfolio.}</em></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-04-15 14:18:08 UTC
</div>
</div>
</body>
</html>